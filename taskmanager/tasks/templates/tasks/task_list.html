<!DOCTYPE html>
<html>
<head>
    <title>Minhas Tarefas</title>
    <style>
        ul { list-style-type: none; padding-left: 20px; }
        .toggle {
            cursor: pointer;
            font-weight: bold;
            margin-right: 5px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Minhas Tarefas</h1>
    <a href="{% url 'add_task' %}">Adicionar Tarefa</a>

    <ul>
        {% for task in tasks %}
            {% include "tasks/_task_item.html" with task=task %}
        {% endfor %}
    </ul>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll(".toggle").forEach(function(toggle) {
                toggle.addEventListener("click", function() {
                    const sublist = this.parentElement.querySelector("ul");
                    if (sublist) {
                        sublist.classList.toggle("hidden");
                        this.textContent = sublist.classList.contains("hidden") ? "▶" : "▼";
                    }
                });
            });
        });
    </script>
</body>
</html>
